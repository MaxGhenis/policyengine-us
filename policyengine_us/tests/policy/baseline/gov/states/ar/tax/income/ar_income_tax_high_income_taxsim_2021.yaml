# High income comparison tests with actual TaxSim output for Arkansas 2021
# Testing with incomes from $150,000 to $2,000,000

- name: TaxSim high income - $200,000 wages (2021)
  period: 2021
  input:
    # $200,000 - $2,200 standard deduction = $197,800 taxable income
    ar_taxable_income_indiv: 197_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 11393.70
    # Expected PolicyEngine: 11393.70 + 29 = 11422.70
    ar_income_tax_before_non_refundable_credits_indiv: 11_422.70

- name: TaxSim high income - $500,000 wages (2021)
  period: 2021
  input:
    # $500,000 - $2,200 = $497,800 taxable income
    ar_taxable_income_indiv: 497_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 29093.70
    # Expected PolicyEngine: 29093.70 + 29 = 29122.70
    ar_income_tax_before_non_refundable_credits_indiv: 29_122.70

- name: TaxSim high income - $1,000,000 wages (2021)
  period: 2021
  input:
    # $1,000,000 - $2,200 = $997,800 taxable income
    ar_taxable_income_indiv: 997_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 58593.70
    # Expected PolicyEngine: 58593.70 + 29 = 58622.70
    ar_income_tax_before_non_refundable_credits_indiv: 58_622.70

- name: TaxSim high income - $250,000 wages (2021)
  period: 2021
  input:
    # $250,000 - $2,200 = $247,800 taxable income
    ar_taxable_income_indiv: 247_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 14343.70
    # Expected PolicyEngine: 14343.70 + 29 = 14372.70
    ar_income_tax_before_non_refundable_credits_indiv: 14_372.70

- name: TaxSim high income - $750,000 wages (2021)
  period: 2021
  input:
    # $750,000 - $2,200 = $747,800 taxable income
    ar_taxable_income_indiv: 747_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 43843.70
    # Expected PolicyEngine: 43843.70 + 29 = 43872.70
    ar_income_tax_before_non_refundable_credits_indiv: 43_872.70

- name: TaxSim high income - $150,000 wages (2021)
  period: 2021
  input:
    # $150,000 - $2,200 = $147,800 taxable income
    ar_taxable_income_indiv: 147_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 8443.70
    # Expected PolicyEngine: 8443.70 + 29 = 8472.70
    ar_income_tax_before_non_refundable_credits_indiv: 8_472.70

- name: TaxSim high income - $300,000 wages (2021)
  period: 2021
  input:
    # $300,000 - $2,200 = $297,800 taxable income
    ar_taxable_income_indiv: 297_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 17293.70
    # Expected PolicyEngine: 17293.70 + 29 = 17322.70
    ar_income_tax_before_non_refundable_credits_indiv: 17_322.70

- name: TaxSim high income - $2,000,000 wages (2021)
  period: 2021
  input:
    # $2,000,000 - $2,200 = $1,997,800 taxable income
    ar_taxable_income_indiv: 1_997_800
    ar_files_separately: true
    state_code: AR
  output:
    # Actual TaxSim output: siitax = 117593.70
    # Expected PolicyEngine: 117593.70 + 29 = 117622.70
    ar_income_tax_before_non_refundable_credits_indiv: 117_622.70

# Test to verify the 5.9% marginal rate at high incomes
- name: Verify marginal rate - Compare $1M vs $2M (2021)
  period: 2021
  input:
    ar_taxable_income_indiv: 1_000_000
    ar_files_separately: true
    state_code: AR
  output:
    # For $1M additional income ($2M - $1M):
    # Additional tax should be $1M * 5.9% = $59,000
    # TaxSim: $117,593.70 - $58,593.70 = $59,000 âœ“
    # This confirms 5.9% marginal rate
    ar_income_tax_before_non_refundable_credits_indiv: 58_752.50